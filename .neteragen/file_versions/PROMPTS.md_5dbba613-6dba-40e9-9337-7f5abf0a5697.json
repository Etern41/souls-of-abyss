{
  "file_name": "PROMPTS.md",
  "revision_id": "5dbba613-6dba-40e9-9337-7f5abf0a5697",
  "metadata": {
    "timestamp": "2025-12-09T12:27:59.466247",
    "type": "cache_version",
    "source": "initial",
    "size": 18093,
    "is_reverted": false,
    "git_branch_name": "",
    "agent_name": "Cody",
    "description": null
  },
  "content": "# PROMPTS FOR SOULS OF THE ABYSS - QUADCODE IDE VERSION\n\n## WORKFLOW\n\n**Agent assignments:**\n1. **Cody/Jace** → game.js + index.html (code)\n2. **Dali** → Sprite sheets (visuals)\n3. **Sonic** → Animation JSON (motion specs)\n\nUse these prompts in order. Each one produces files for the next step.\n\n---\n\n## PROMPT #1: GAME.JS (for Cody Developer)\n\n**Action:** Copy below → Paste into Cody chat → Wait for response → Save as `game.js`\n\n```\nYou are a JavaScript game developer building Dark Fantasy Survivors for Quadcode IDE.\n\n## CRITICAL REQUIREMENTS\n\n- NO TODOs, NO placeholders. COMPLETE code only.\n- Reference: GAME-DESIGN.md (Parts 1-5)\n- Sprites will be provided later by Dali; prepare Sprite class for image loading\n- Animation specs will be JSON from Sonic; prepare animation state machine\n- Canvas 1000x600, 60 FPS target\n- No browser storage (localStorage banned)\n\n## CORE CLASSES\n\n**Vector2(x, y):**\n- Methods: distance(other), angle(other), normalize(), add(v), subtract(v)\n\n**Sprite(name, imageUrl, frameWidth, frameHeight, animationJson):**\n- Properties: currentState, animationTime, frameIndex, image (preloaded)\n- Methods: update(dt), getFrame() → {srcX, srcY}, draw(ctx, destX, destY, flipX)\n- Fallback: If image fails to load, drawCircle(color) instead\n\n**Weapon class with 9 weapons:**\n- CursedBlade: 10 dmg, 1/sec, 100px cone 100°\n- ShatterburstAxe: 15 dmg, 0.8/sec, AOE 50px explosion, knockback\n- SoulreaverDagger: 5×3 hits, 2/sec, 20px range, 20% lifesteal\n- EternalHalberd: 25 dmg, 0.5/sec, AOE 80px, knock+pull 200px\n- ChaosOrb: 8×2-4 orbs, 1.2/sec, pierce, projectile\n- ReapersScythe: 20 dmg, 0.8/sec, AOE 100px, pull 200px\n- BloodmoonLance: 20 dmg, 1/sec, beam, 50% lifesteal (cap at maxHP)\n- GodsayerSword: 100 dmg, E key, 1 Essence cost, 150px range, screen shake\n- VoidSummoner: 3 tentacles × 5 dmg, spawn time 8 sec, 2 Essence cost\n\n**Particle(x, y, vx, vy, lifetime, color, type):**\n- Types: slash, explosion, spark, blood, glow\n- Methods: update(dt), draw(ctx, time)\n- Animations (from Sonic JSON): fade-out, trajectory, gravity\n\n**Player(x, y, character):**\n- Characters: knight (100 HP, 12 dmg, 110 range, 5 armor, +1/level), witch (70 HP, 8 dmg, 140 range), rogue (85 HP, 10 dmg, 90 range, 250 speed, 10% dodge, kill streak on 5 kills)\n- Sprite: Load from sprites/knight.png, witch.png, rogue.png\n- Animation states: idle, run, attack, hit, death (from animation JSON)\n- Methods: update(dt, keys, enemies, canvas), takeDamage(dmg), gainExp(amt), attack(enemies), draw(ctx, time)\n\n**Enemy(x, y, type, isElite):**\n- Regular: zombie, spectre, cultist\n- Elite: vampire, wraith, corrupted_knight, warden\n- Boss: shadow_lord, void_rift, ancient_one\n- Sprite: Load from sprites/[type].png\n- Animation states: walk, attack, death\n- Methods: update(dt, player, difficulty), takeDamage(dmg), draw(ctx, time)\n\n**Soul(x, y, type):**\n- Types: ethereal (+10 XP, white), essence (+1 charge, gold), corrupted (+20 XP, red), cursed (+50 XP, black)\n- Methods: update(dt, player), draw(ctx, time)\n\n**gameState object:**\n- Properties: player, enemies[], souls[], particles[], gameTime, waveNumber, waveTimer, bossSpawnTimer, alive, keys, enemiesKilled, currentWeapon, weaponCharges, essenceCollected\n\n## FUNCTIONS\n\n**initGame(character):**\n- Reset all state, create player at (500, 300), clear arrays, set alive = true\n\n**spawnWave():**\n- Every 30 seconds, spawn 5 + (waveNumber × 2) enemies\n- Spawn in circle 100px around player\n- 80% regular, 20% elite (probability-based)\n- Apply difficulty multiplier = 1 + (gameTime / 4)\n\n**spawnBoss():**\n- Every 120 seconds, spawn next boss in rotation\n- Spawn at random edge (off-screen initially)\n- Shadow Lord → Void Rift → Ancient One (cycle)\n- Screen shake effect\n\n**gameLoop(dt):**\n- gameTime += dt\n- Update player, enemies, souls, particles\n- Wave timer: spawn every 30s\n- Boss timer: spawn every 120s\n- Collision: enemies within 30px damage player\n- Dead enemies: spawn souls (with probabilities), spawn particles, increment kills\n- Dead particles: cleanup old ones (lifetime < 0)\n- Check: player health ≤ 0 → alive = false\n\n**drawGame(ctx, canvas):**\n- Background: gradient purple → blue → black\n- Map: mountains silhouettes, 8 pillars, center rune, walls, glow around player\n- Entities: draw enemies, souls, particles, player (using Sprite.draw())\n- HUD: time, level, HP bar, armor, wave number, enemy count, essence charges, boss timer\n\n## ANIMATION STATE SYSTEM\n\nEach entity has:\n- currentState: 'idle' | 'run' | 'attack' | 'hit' | 'death'\n- animationTime: seconds elapsed in current state\n- frameIndex: current frame (0-N) based on animationTime\n\nAnimation JSON (from Sonic) provides:\n```json\n{\n  \"idle\": {\"frameCount\": 8, \"frameTime\": 0.25, \"loop\": true},\n  \"run\": {\"frameCount\": 4, \"frameTime\": 0.15, \"loop\": true},\n  \"attack\": {\"frameCount\": 2, \"frameTime\": 0.2, \"loop\": false},\n  \"death\": {\"frameCount\": 6, \"frameTime\": 0.15, \"loop\": false}\n}\n```\n\nUse this to update frameIndex each frame:\n```js\nconst animSpec = animationJson[currentState];\nframeIndex = Math.floor(animationTime / animSpec.frameTime) % animSpec.frameCount;\n```\n\n## KEY MECHANICS\n\n- Difficulty: multiplier = 1 + (gameTime / 4), applies to enemy stats\n- Lifesteal: Dagger 20%, Lance 50%, cap at maxHealth\n- Kill Streak (Rogue): 5 kills = +15% dmg (5 sec), resets on hit\n- Essence economy: 5 collected = 1 charge\n- Auto-attack: player attacks nearby enemies automatically\n- Animation transitions: idle → run (when moving), run → idle (when stop), attack → idle (when anim ends)\n\n## VALIDATION\n\n// ✓ Player moves WASD, enemies spawn every 30s, bosses every 120s\n// ✓ All 9 weapons work with correct mechanics and damage\n// ✓ All 10 enemy types with stats match GAME-DESIGN\n// ✓ Souls drop with correct probabilities\n// ✓ Difficulty scales with time\n// ✓ Animation states transition smoothly\n// ✓ Sprite loading fallback to shapes if PNG missing\n// ✓ HUD updates every frame\n// ✓ 60 FPS performance\n// ✓ NO console errors\n\n## OUTPUT\n\nReturn ONLY game.js. NO markdown. NO explanations. Start with \"class Vector2\".\n```\n\n---\n\n## PROMPT #2: INDEX.HTML (for Cody Developer)\n\n**Action:** Copy below → Paste into Cody chat → Wait for response → Save as `index.html`\n\n```\nYou are a web developer. Write index.html for Dark Fantasy Survivors game with sprite support.\n\n## CONTEXT\n\nYou have game.js with all logic and animation system. This HTML integrates sprites from Dali.\n\n## REQUIREMENTS\n\n- Canvas 1000x600\n- Character select buttons (Knight, Witch, Rogue) with onclick=\"selectChar()\"\n- HUD container with real-time updates (timer, level, HP, armor, wave, enemies, essence, boss timer)\n- Death screen modal with stats\n- WASD + E input handling\n- Inline CSS only (dark theme, no external files)\n- Inline JavaScript only\n- <script src=\"game.js\"></script> before </body>\n- Image loading:\n  - <img id=\"spriteKnight\" src=\"sprites/knight.png\" style=\"display:none\">\n  - <img id=\"spriteWitch\" src=\"sprites/witch.png\" style=\"display:none\">\n  - ... (one img tag per sprite)\n\n## HTML STRUCTURE\n\n- Proper HTML5 doctype, responsive meta tags\n- Canvas with id=\"gameCanvas\"\n- Hidden img tags for sprite preloading\n- HUD div with id=\"hud\" (positioned absolutely, updates in real-time)\n- Death screen div with id=\"deathScreen\" (modal, centered)\n- Character select buttons\n\n## JAVASCRIPT FUNCTIONS NEEDED\n\n- selectChar(char): Initialize game with character, start animation loop\n- updateHUD(): Real-time updates from gameState\n- showDeathScreen(): Display death stats\n- loadSprites(): Preload all img tags into imageCache\n- animate(): Main animation loop (requestAnimationFrame)\n\n## INPUT HANDLING\n\n- Document keydown/keyup for WASD and E key\n- gameState.keys object: {w: false, a: false, s: false, d: false, e: false}\n- E key: if gameState.player.weaponCharges > 0, decrement and trigger Godsayer\n\n## IMAGE PATHS\n\nSprites folder structure (Dali will create):\n- sprites/knight.png (character)\n- sprites/witch.png\n- sprites/rogue.png\n- sprites/zombie.png, spectre.png, cultist.png (regular enemies)\n- sprites/vampire.png, wraith.png, corrupted_knight.png, warden.png (elites)\n- sprites/shadow_lord.png, void_rift.png, ancient_one.png (bosses)\n- sprites/particles.png (all particle types)\n- sprites/map.png (background)\n\n## STYLING\n\n- Dark theme: #0a0a0f background, #c41e3a accent\n- HUD positioned top-left, death screen centered modal\n- Character buttons with hover/active states\n- Health bar with red fill\n- Responsive layout\n\n## OUTPUT\n\nReturn ONLY index.html. NO markdown. NO explanations. Start with \"<!DOCTYPE html>\".\n```\n\n---\n\n## PROMPT #3: SPRITE SHEETS (for Dali Designer)\n\n**Action:** Copy below → Paste into Dali chat → Wait for response → Organize sprites into folders\n\n```\nYou are a digital artist. Create sprite sheets for Dark Fantasy Survivors game.\n\n## REQUIREMENTS\n\nAll sprites:\n- Format: PNG with transparency\n- Color palette: Dark fantasy aesthetic\n- Resolution: 48x48 pixels per frame (scale 2x in-game)\n- Optimization: Indexed color, minimal file size\n- Animation ready: Multiple frames horizontally, one row per animation state\n\n## CHARACTER SPRITES (3 files)\n\n**knight.png (5 animation rows, 8 frames each = 384x240)**\nRow 1 (Idle): Standing with sword, armor glowing red, 8 frames breathing animation\nRow 2 (Run): Legs moving forward, sword raised, cape flowing, 4 frames (loop)\nRow 3 (Attack): Sword swing arc, 2 frames fast\nRow 4 (Hit): Knocked back reaction, 2 frames\nRow 5 (Death): Falls down and fades, 6 frames\n\n**witch.png (5 animation rows, 8 frames each = 384x240)**\nRow 1 (Idle): Standing with staff, robe flowing, aura glowing, 8 frames\nRow 2 (Run): Levitating movement, robe trailing, 4 frames\nRow 3 (Cast): Staff glow buildup, projectile appearing, 4 frames\nRow 4 (Hit): Knockback with sparkles, 2 frames\nRow 5 (Death): Dissipates into particles, 6 frames\n\n**rogue.png (5 animation rows, 8 frames each = 384x240)**\nRow 1 (Idle): Crouched dagger ready, shadows around, 8 frames subtle movement\nRow 2 (Run): Dashing quick movement, blur trails, 3 frames (loop)\nRow 3 (Attack): Dagger thrust, 2 frames\nRow 4 (Dodge): Roll animation, invincibility effect, 4 frames\nRow 5 (Death): Vanishes with shadow, 4 frames\n\n## ENEMY SPRITES (10 files, same format)\n\n**Regular Enemies:**\n- zombie.png: Shambling walk (2 rows), attack (1 row), death (1 row)\n- spectre.png: Floating ethereal (2 rows), attack (1 row), death (1 row)\n- cultist.png: Walking robed (2 rows), casting (1 row), death (1 row)\n\n**Elite Enemies:**\n- vampire.png: Elegant walk (2 rows), attack (1 row), death (1 row)\n- wraith.png: Spiral movement (2 rows), attack (1 row), death (1 row)\n- corrupted_knight.png: Armored walk (2 rows), attack (1 row), death (1 row)\n- warden.png: Patrol walk (2 rows), attack (1 row), death (1 row)\n\n**Boss Enemies (3 files):**\n- shadow_lord.png: Idle (2 rows pulsing), attack (1 row), phase change (1 row), death (1 row) - all large\n- void_rift.png: Idle swirling (2 rows), attack (1 row), phase change (1 row), death (1 row)\n- ancient_one.png: Idle cosmic (2 rows), attack (1 row), phase change (1 row), death (1 row)\n\nSize: Bosses are 96x96 per frame (2x enemy size)\n\n## EFFECT SPRITES\n\n**particles.png (64x128 sheet):**\n- Slash particles (4 frames small)\n- Explosion circles (4 frames)\n- Spark trails (3 frames)\n- Blood drops (2 frames)\n- Glow rings (4 frames)\n- All small (16x16 to 32x32)\n\n## MAP/UI\n\n**map.png (1000x600 background):**\n- Gradient background: purple top → blue middle → black bottom\n- Fog effect: semi-transparent gray overlay\n- Mountain silhouettes left/right edges\n- 8 dark pillars placed around borders\n- Center glowing ritual circle\n- Semi-transparent walls to contain arena\n\n**ui.png (optional, for HUD elements):**\n- Health bar frame\n- Essence soul icon\n- Weapon icons (9 small icons)\n- Borders and frames\n\n## COLOR PALETTE (Dark Fantasy)\n\n- Reds: Shadow Lord, Knight, Vampire (#c41e3a, #ff5459)\n- Blues: Witch, Spectre, Warden (#3284c6, #32b8c6)\n- Purples: Cultist, Rogue accent (#5f1e8f, #9e3fb0)\n- Blacks: Wraith, Void Rift, background (#1f2121, #260828)\n- Grays: Zombie, regular enemies (#434949, #6f7d7c)\n- Golds: Soul pickups, essence (#f9d71c, #ffd700)\n- Cyans: Warden, glow effects (#06b6d4)\n- Reds/Oranges: Explosions, particles (#ff5459, #e68161)\n\n## ANIMATION GUIDELINES\n\n- Smooth transitions between frames\n- No jarring jumps\n- Loop animations should connect smoothly (first frame ≈ last frame)\n- Attack animations can be punchy (abrupt end)\n- Death animations: gradually fade or dissipate\n- Boss animations: 1.5x slower than regular enemies (more menacing)\n- Particle animations: fade out smoothly\n\n## FILE NAMING\n\nSave all in `sprites/` folder:\n- sprites/knight.png\n- sprites/witch.png\n- sprites/rogue.png\n- sprites/zombie.png\n- ... (all 10 enemies)\n- sprites/shadow_lord.png\n- sprites/void_rift.png\n- sprites/ancient_one.png\n- sprites/particles.png\n- sprites/map.png\n\nTotal: 15 PNG files\n\n## QUALITY CHECKLIST\n\n✓ All sprites have consistent art style\n✓ Animation frames are aligned properly (no off-center)\n✓ Transparency works (PNG alpha channel)\n✓ File sizes optimized (indexed color, no unnecessary data)\n✓ All animation states present (idle, run, attack, death minimum)\n✓ Character sprites easily distinguishable\n✓ Enemy sprites fit dark fantasy theme\n✓ Boss sprites clearly larger/more menacing\n✓ Particle sprites small and clean\n✓ Background map professional looking\n\n## OUTPUT\n\nGenerate all 15 PNG files in sprites/ folder. No other formats. Optimize for web.\n```\n\n---\n\n## PROMPT #4: ANIMATION SPECS (for Sonic Motion Designer)\n\n**Action:** Copy below → Paste into Sonic chat → Wait for response → Save JSON files\n\n```\nYou are a motion designer. Create animation specifications for Dark Fantasy Survivors.\n\n## OUTPUT FORMAT\n\nCreate JSON files in `animations/` folder with frame timing and state transitions.\n\n## TEMPLATE (for each entity type)\n\n```json\n{\n  \"entityType\": \"knight\",\n  \"spriteSize\": 48,\n  \"animations\": {\n    \"idle\": {\n      \"frameCount\": 8,\n      \"frameTime\": 0.25,\n      \"loop\": true,\n      \"nextState\": \"idle\"\n    },\n    \"run\": {\n      \"frameCount\": 4,\n      \"frameTime\": 0.15,\n      \"loop\": true,\n      \"nextState\": \"run\"\n    },\n    \"attack\": {\n      \"frameCount\": 2,\n      \"frameTime\": 0.2,\n      \"loop\": false,\n      \"nextState\": \"idle\",\n      \"damageFrame\": 1\n    },\n    \"hit\": {\n      \"frameCount\": 2,\n      \"frameTime\": 0.15,\n      \"loop\": false,\n      \"nextState\": \"idle\"\n    },\n    \"death\": {\n      \"frameCount\": 6,\n      \"frameTime\": 0.15,\n      \"loop\": false,\n      \"nextState\": \"death\"\n    }\n  },\n  \"transitions\": {\n    \"idle\": [\"run\", \"attack\", \"hit\", \"death\"],\n    \"run\": [\"idle\", \"attack\", \"hit\", \"death\"],\n    \"attack\": [\"idle\"],\n    \"hit\": [\"idle\"],\n    \"death\": []\n  },\n  \"physics\": {\n    \"gravity\": 0,\n    \"friction\": 0\n  }\n}\n```\n\n## FILES TO CREATE\n\n**Character animations (3 files):**\n- animations/knight.json\n- animations/witch.json\n- animations/rogue.json\n\n**Enemy animations (7 files):**\n- animations/zombie.json\n- animations/spectre.json\n- animations/cultist.json\n- animations/vampire.json\n- animations/wraith.json\n- animations/corrupted_knight.json\n- animations/warden.json\n\n**Boss animations (3 files):**\n- animations/shadow_lord.json (size: 96)\n- animations/void_rift.json (size: 96)\n- animations/ancient_one.json (size: 96)\n\n**Effects (1 file):**\n- animations/particles.json\n\nTotal: 14 JSON files\n\n## SPECIFIC TIMING\n\n### Character Animations\n\n**Knight (heavy, slow):**\n- Idle: 8 frames, 0.25s each = 2s loop\n- Run: 4 frames, 0.15s each = 0.6s loop\n- Attack: 2 frames, 0.2s each = 0.4s\n- Hit: 2 frames, 0.15s = 0.3s\n- Death: 6 frames, 0.15s = 0.9s\n\n**Witch (smooth, magical):**\n- Idle: 8 frames, 0.25s = 2s (breathing + aura)\n- Run: 4 frames, 0.15s = 0.6s\n- Cast: 4 frames, 0.15s = 0.6s (glowing buildup)\n- Hit: 2 frames, 0.15s = 0.3s\n- Death: 6 frames, 0.2s = 1.2s (dissipate slow)\n\n**Rogue (fast, snappy):**\n- Idle: 8 frames, 0.15s = 1.2s (subtle movement)\n- Run: 3 frames, 0.1s = 0.3s (fast dashing)\n- Attack: 2 frames, 0.1s = 0.2s (instant stab)\n- Dodge: 4 frames, 0.12s = 0.48s (quick roll)\n- Death: 4 frames, 0.1s = 0.4s (quick vanish)\n\n### Enemy Animations\n\n**Regular (Zombie, Spectre, Cultist):**\n- Walk: 2 frames, 0.5s = 1s loop (slow shamble)\n- Attack: 1 frame, 0.4s (1 frame attack, no animation)\n- Death: 4 frames, 0.15s = 0.6s\n\n**Elite (Vampire, Wraith, Corrupted Knight, Warden):**\n- Walk: 2 frames, 0.4s = 0.8s loop\n- Attack: 1 frame, 0.4s\n- Death: 4 frames, 0.15s = 0.6s\n\n### Boss Animations\n\n**Shadow Lord, Void Rift, Ancient One:**\n- Idle: 2 frames, 0.5s = 1s loop (pulsing/breathing)\n- Attack: 1 frame, 0.8s (long attack wind-up)\n- Phase change: 1 frame, 1s (intensity shift at 50% HP)\n- Death: 1 frame, 2s (slow explosion/disappear)\n\n### Particle Animations\n\n```json\n{\n  \"entityType\": \"particles\",\n  \"animations\": {\n    \"slash\": {\"frameCount\": 4, \"frameTime\": 0.08, \"loop\": false},\n    \"explosion\": {\"frameCount\": 4, \"frameTime\": 0.1, \"loop\": false},\n    \"spark\": {\"frameCount\": 3, \"frameTime\": 0.1, \"loop\": false},\n    \"blood\": {\"frameCount\": 2, \"frameTime\": 0.12, \"loop\": false},\n    \"glow\": {\"frameCount\": 4, \"frameTime\": 0.1, \"loop\": false}\n  }\n}\n```\n\n## EASING & PHYSICS (Optional, for advanced animation)\n\nIf supporting easing curves:\n```json\n\"attack\": {\n  \"easing\": \"ease-in-out\",\n  \"duration\": 0.4,\n  \"dampening\": 0.8\n}\n```\n\nThis allows smooth acceleration/deceleration on attacks.\n\n## VALIDATION\n\n✓ All animation states present for each entity\n✓ Frame counts match sprite sheets\n✓ Timing creates smooth loops (connection between frames)\n✓ Transitions make sense (attack → idle, not attack → run)\n✓ Boss animations slower/longer than regular enemies\n✓ No animation state lasts less than 0.1s or more than 3s\n✓ All JSON valid syntax\n\n## OUTPUT\n\nCreate 14 JSON files in animations/ folder. Provide complete, valid JSON. NO markdown.\n```\n\n---\n\n## FINAL CHECKLIST\n\n1. **Cody** generates `game.js` ✓\n2. **Cody** generates `index.html` ✓\n3. **Dali** generates 15 PNG sprites in `sprites/` ✓\n4. **Sonic** generates 14 JSON animations in `animations/` ✓\n5. Test in browser: Load sprites → Animate → Play game ✓\n\nAll files work together seamlessly.\n",
  "saved_at": "2025-12-09T12:27:59.466247"
}